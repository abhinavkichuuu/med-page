<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MediGuideAI</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --accent: #124a9e;
      --accent-soft: #2f6ddf;
      --muted: #6c7a90;
      --radius: 18px;
      --shadow: 0 10px 26px rgba(10, 40, 90, 0.12);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 12px;
    }
    .app {
      width: 100%;
      max-width: 420px;
      background: #fff;
      border-radius: 28px;
      padding: 22px 20px 26px;
      box-shadow: var(--shadow);
    }

    /* HEADER â€“ option B: logos left/right, text centered */
    header {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      margin-bottom: 20px;
      column-gap: 10px;
    }
    .head-left {
      display: flex;
      justify-content: flex-start;
      align-items: center;
    }
    .brand-icon {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
      font-size: 22px;
    }
    .head-center {
      text-align: center;
      line-height: 1.2;
    }
    .brand-text {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
      margin: 0;
    }
    .sub-brand-text {
      font-size: 13px;
      font-weight: 500;
      color: var(--muted);
      margin: 2px 0 0;
    }
    .head-right {
      display: flex;
      justify-content: flex-end;
    }
    .logo-ncp {
      height: 40px;
      width: auto;
      border-radius: 10px;
      object-fit: contain;
    }

    main { margin-top: 8px; }

    .screen { display: none; }
    .screen.active { display: block; }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 18px 16px 18px;
      border: 1px solid rgba(12, 36, 90, 0.04);
    }

    .title-main {
      font-size: 20px;
      font-weight: 600;
      margin: 0 0 10px;
      color: #1b2b40;
      text-align: center;
    }
    .text-center { text-align: center; }
    .text-muted {
      font-size: 13px;
      color: var(--muted);
      margin-top: 6px;
    }

    .input-wrapper {
      border-radius: 16px;
      border: 1px solid rgba(18, 74, 158, 0.18);
      padding: 10px 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      background: #f4f7ff;
    }
    .input-wrapper input {
      border: none;
      outline: none;
      background: transparent;
      width: 100%;
      font-size: 16px;
      color: #1d2b40;
    }
    .input-wrapper input::placeholder { color: #a0a9bd; }

    .btn {
      width: 100%;
      margin-top: 16px;
      border-radius: 16px;
      border: none;
      padding: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      color: #fff;
      box-shadow: 0 10px 22px rgba(18, 74, 158, 0.25);
    }
    .btn-secondary {
      background: #eef3ff;
      color: var(--accent);
      border: 1px solid rgba(18, 74, 158, 0.16);
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
    }

    .pill-card {
      margin-top: 4px;
      border-radius: 18px;
      padding: 18px 16px;
      background: #f6f8ff;
      border: 1px solid rgba(18, 74, 158, 0.06);
    }
    .pill-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .pill-name {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
    }
    .pill-icon {
      width: 52px;
      height: 52px;
      border-radius: 16px;
      background: #ffffff;
      border: 1px solid rgba(18, 74, 158, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .pill-section-title {
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 4px;
      color: #21324b;
    }
    ul.counsel-list {
      margin: 4px 0 0;
      padding-left: 18px;
      color: #3b4860;
      font-size: 14px;
    }
    ul.counsel-list li { margin-bottom: 4px; }

    .error-text {
      margin-top: 6px;
      font-size: 13px;
      color: #c62828;
      min-height: 16px;
      text-align: center;
    }

    @media (max-width: 480px) {
      body { padding: 8px; }
      .app {
        border-radius: 20px;
        padding: 18px 14px 22px;
      }
      .brand-text { font-size: 20px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- HEADER (shows on all pages) -->
    <header>
      <div class="head-left">
        <div class="brand-icon">+</div>
      </div>
      <div class="head-center">
        <p class="brand-text">MediGuideAI</p>
        <p class="sub-brand-text">Department of Pharmacy Practice</p>
      </div>
      <div class="head-right">
        <!-- Make sure ncp-logo.png is in the same folder -->
        <img src="ncp-logo.png" alt="NCP Logo" class="logo-ncp">
      </div>
    </header>

    <main>
      <!-- PAGE 1: Enter medicine name -->
      <section id="screen1" class="screen active">
        <div class="card">
          <h2 class="title-main">Enter medicine name</h2>

          <div class="input-wrapper">
            <input id="medInput" type="text" placeholder="Enter medicine name" autocomplete="off">
          </div>

          <button id="submitBtn" class="btn btn-primary">Submit</button>

          <div id="errorMsg" class="error-text"></div>
          <div class="text-muted text-center">
            Examples: Paracetamol, Ibuprofen, Cetirizine, Amoxicillin, ORS, Omeprazoleâ€¦
          </div>
        </div>
      </section>

      <!-- PAGE 2: Medicine received button only -->
      <section id="screen2" class="screen">
        <div class="card">
          <h2 class="title-main">Confirm medicine</h2>
          <p class="text-center text-muted">
            Medicine: <strong id="confirmName"></strong>
          </p>
          <button id="receivedBtn" class="btn btn-primary">Medicine received</button>
        </div>
      </section>

      <!-- PAGE 3: Counselling points -->
      <section id="screen3" class="screen">
        <div class="pill-card">
          <div class="pill-header">
            <div>
              <div class="pill-name" id="cMedName">Paracetamol</div>
              <div class="text-muted" id="cMedTagline">Counselling &amp; safety tips</div>
            </div>
            <div class="pill-icon">
              <!-- simple pill icon -->
              <svg width="34" height="34" viewBox="0 0 24 24" fill="none">
                <rect x="2" y="5" width="11" height="14" rx="3" fill="#2f6ddf" />
                <rect x="11" y="5" width="11" height="14" rx="3" fill="#ffffff" stroke="#2f6ddf" />
              </svg>
            </div>
          </div>

          <div class="pill-section-title">Counselling points</div>
          <ul id="counselList" class="counsel-list"></ul>
        </div>

        <button id="okBtn" class="btn btn-primary" style="margin-top: 16px;">OK</button>
      </section>

      <!-- PAGE 4: Need another medicine or done -->
      <section id="screen4" class="screen">
        <div class="card">
          <h2 class="title-main">Need another medicine?</h2>
          <p class="text-center text-muted">
            Do you want to check counselling for another medicine?
          </p>
          <button id="anotherBtn" class="btn btn-secondary">Yes, another medicine</button>
          <button id="doneBtn" class="btn btn-primary">Done</button>
        </div>
      </section>

      <!-- PAGE 5: Thank you page -->
      <section id="screen5" class="screen">
        <div class="card">
          <h2 class="title-main">Thank you for using MediGuideAI! ðŸ’Š</h2>
          <p class="text-center text-muted">
            Stay safe &amp; use medicines responsibly.<br>
            You can go back to the start if you want to check another medicine.
          </p>
          <button id="backToStartBtn" class="btn btn-primary">Back to start</button>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ---------- 1. MEDICINE DATA: 5 UNIQUE POINTS EACH (WITH EMOJIS) ----------

  const counsellingData = {
  "paracetamol": [
    "ðŸ’Š Take one tablet after food.",
    "ðŸŒ¡ï¸ Used for fever and mild to moderate pain.",
    "â±ï¸ Maintain a 4â€“6 hour gap between doses.",
    "âš ï¸ Do not exceed 4 doses in 24 hours.",
    "ðŸº Avoid alcohol."
  ],

  "diclofenac": [
    "ðŸ’Š Take after food to reduce stomach upset.",
    "ðŸ”¥ Used for pain and inflammation.",
    "â±ï¸ Maintain an 8â€“12 hour gap between doses.",
    "ðŸš« Do not combine with other NSAIDs.",
    "ðŸº Avoid alcohol."
  ],

  "ibuprofen": [
    "ðŸ’Š Take after food to prevent stomach irritation.",
    "ðŸ”¥ Used for pain, fever, and inflammation.",
    "â±ï¸ Maintain a 6â€“8 hour gap between doses.",
    "âš ï¸ Do not exceed the prescribed dose.",
    "ðŸº Avoid alcohol."
  ],

  "meftal": [ // Meftal (Mefenamic Acid)
    "ðŸ’Š Take after food.",
    "ðŸ¤• Used for menstrual cramps and mild to moderate pain.",
    "â±ï¸ Maintain an 8-hour gap between doses.",
    "âš ï¸ Do not exceed the prescribed dose.",
    "ðŸº Avoid alcohol."
  ],

  "aspirin": [
    "ðŸ’Š Take after food with a glass of water.",
    "ðŸ”¥ Used for pain, fever, and prevention of blood clots.",
    "ðŸš« Do not give to children under 12 years.",
    "ðŸº Avoid alcohol and other NSAIDs.",
    "ðŸ©¸ Report any unusual bleeding or bruising."
  ],

  "amoxicillin": [
    "ðŸ’Š Take after food to reduce stomach upset.",
    "ðŸ¦  Used for bacterial infections.",
    "â±ï¸ Complete the full course even if symptoms improve.",
    "ðŸ“ Maintain equal time gaps between doses.",
    "âš ï¸ Report rash or diarrhea to your doctor."
  ],

  "azithromycin": [
    "ðŸ’Š Take with or without food, at the same time each day.",
    "ðŸ¦  Used for bacterial infections.",
    "â±ï¸ Complete the full course as prescribed.",
    "ðŸš« Avoid antacids within 2 hours of the dose.",
    "âš ï¸ Report severe diarrhea or allergic reactions."
  ],

  "streptomycin": [
    "ðŸ’‰ Given only as an injection by a healthcare professional.",
    "ðŸ¦  Used for severe infections like tuberculosis.",
    "ðŸ‘‚ Report any hearing changes or dizziness.",
    "ðŸ©º Kidney function may need monitoring.",
    "â±ï¸ Complete the full treatment course."
  ],

  "cetirizine": [
    "ðŸ’Š Take once daily, with or without food.",
    "ðŸ¤§ Used for allergies, sneezing, and itching.",
    "ðŸ˜´ May cause mild drowsiness.",
    "ðŸº Avoid alcohol and other sedatives.",
    "ðŸ“… Continue daily use as prescribed."
  ],

  "ranitidine": [
    "ðŸ’Š Take 30 minutes before food.",
    "ðŸ”¥ Used for acidity, heartburn, and ulcers.",
    "ðŸ½ï¸ Avoid alcohol and spicy foods.",
    "ðŸš« Do not crush or chew the tablet.",
    "âš ï¸ Report persistent stomach pain or black stools."
  ],

  "propranolol": [
    "ðŸ’Š Take after food at the same time every day.",
    "â¤ï¸ Used for high blood pressure, heart conditions, and anxiety.",
    "ðŸš« Do not stop suddenlyâ€”it may worsen heart problems.",
    "ðŸ˜µ May cause dizziness or slow heartbeat.",
    "ðŸº Avoid alcohol."
  ],

  "salbutamol": [
    "ðŸ’¨ Use inhaler as directed for quick asthma relief.",
    "ðŸ”„ Shake the inhaler well before each use.",
    "â¤ï¸ May cause tremors or fast heartbeat.",
    "ðŸ«§ Rinse your mouth after using the inhaler.",
    "âš ï¸ Do not exceed the prescribed number of puffs."
  ],

  "pantoprazole": [
    "ðŸ’Š Take 30 minutes before meals.",
    "ðŸ”¥ Used for acid reflux, GERD, and ulcers.",
    "ðŸš« Swallow the tablet whole; do not crush or chew.",
    "ðŸº Avoid alcohol and smoking.",
    "âš ï¸ Report persistent stomach pain or black stools."
  ],

  "budesonide": [ // inhaler
    "ðŸ’¨ Shake well and inhale exactly as prescribed.",
    "ðŸ« Used for long-term asthma control.",
    "ðŸ«§ Rinse mouth after use to prevent fungal infection.",
    "ðŸš« Not for sudden asthma attacks (emergency).",
    "ðŸ“… Use every day for best results."
  ],

  "metformin": [
    "ðŸ’Š Take with meals to reduce stomach upset.",
    "ðŸ©¸ Used for diabetes control.",
    "ðŸº Avoid alcohol while on this medicine.",
    "ðŸ¤¢ May cause mild diarrhea at the start.",
    "ðŸƒ Continue diet and exercise along with medication."
  ],

  "insulin": [
    "ðŸ’‰ Inject exactly as prescribed by your doctor.",
    "ðŸ©¸ Used to control blood sugar in diabetes.",
    "ðŸ” Rotate injection sites to avoid lumps under the skin.",
    "ðŸ½ï¸ Do not skip meals after taking insulin.",
    "ðŸ§Š Store in a cool place in the fridge; do not freeze."
  ],

  "atorvastatin": [
    "ðŸ’Š Take once daily, preferably at night.",
    "ðŸ«€ Used to lower cholesterol and prevent heart disease.",
    "ðŸŠ Avoid grapefruit juice and limit alcohol.",
    "ðŸ’ª Report any muscle pain, tenderness, or weakness.",
    "ðŸ“… Continue long-term even if you feel well."
  ],

  "nitroglycerine": [
    "ðŸ’Š Place tablet under the tongue at onset of chest pain.",
    "ðŸ«€ Used for angina (chest pain) relief.",
    "ðŸ˜µ Sit or lie down while takingâ€”it may cause dizziness.",
    "ðŸš¨ If pain persists after 3 tablets, seek emergency help.",
    "ðŸ”¥ Store tablets properly; avoid heat and moisture."
  ],

  "atenolol": [
    "ðŸ’Š Take at the same time every day.",
    "â¤ï¸ Used for high blood pressure and heart conditions.",
    "â„ï¸ May cause slow heartbeat or cold hands and feet.",
    "ðŸš« Do not stop the medicine abruptly.",
    "âš ï¸ Use with caution in asthma unless doctor advises."
  ],

  "ors": [
    "ðŸ¥¤ Dissolve the entire sachet in the exact amount of clean water.",
    "ðŸ’§ Used to prevent and treat dehydration.",
    "ðŸ«— Sip slowly throughout the day rather than all at once.",
    "ðŸš« Do not mix with milk, juice, or soft drinks.",
    "â±ï¸ Use the solution within 24 hours after preparation."
  ]
};

    // ---------- 2. FUZZY MATCH: ONLY *ONE* LETTER MISTAKE ALLOWED ----------

    function levenshtein(a, b) {
      const dp = Array(a.length + 1).fill(null).map(() =>
        Array(b.length + 1).fill(0)
      );
      for (let i = 0; i <= a.length; i++) dp[i][0] = i;
      for (let j = 0; j <= b.length; j++) dp[0][j] = j;

      for (let i = 1; i <= a.length; i++) {
        for (let j = 1; j <= b.length; j++) {
          const cost = a[i - 1] === b[j - 1] ? 0 : 1;
          dp[i][j] = Math.min(
            dp[i - 1][j] + 1,
            dp[i][j - 1] + 1,
            dp[i - 1][j - 1] + cost
          );
        }
      }
      return dp[a.length][b.length];
    }

    function findClosestMedicine(input) {
      // use first word only, lowercase
      input = (input || "").trim().toLowerCase().split(/\s+/)[0];
      if (!input) return null;

      let bestMatch = null;
      let smallestDistance = Infinity;

      for (const med in counsellingData) {
        const dist = levenshtein(input, med);
        if (dist < smallestDistance) {
          smallestDistance = dist;
          bestMatch = med;
        }
      }

      // âœ… Only exact match (0) or ONE-letter mistake (1) allowed
      return smallestDistance <= 1 ? bestMatch : null;
    }

    // ---------- 3. PAGE / SCREEN HANDLING ----------

    const screens = {
      1: document.getElementById("screen1"),
      2: document.getElementById("screen2"),
      3: document.getElementById("screen3"),
      4: document.getElementById("screen4"),
      5: document.getElementById("screen5")
    };

    function showScreen(n) {
      Object.values(screens).forEach(s => s.classList.remove("active"));
      screens[n].classList.add("active");
    }

    // ---------- 4. ELEMENTS & FLOW LOGIC ----------

    const medInput = document.getElementById("medInput");
    const submitBtn = document.getElementById("submitBtn");
    const errorMsg = document.getElementById("errorMsg");

    const confirmName = document.getElementById("confirmName");
    const receivedBtn = document.getElementById("receivedBtn");

    const cMedName = document.getElementById("cMedName");
    const counselList = document.getElementById("counselList");
    const okBtn = document.getElementById("okBtn");

    const anotherBtn = document.getElementById("anotherBtn");
    const doneBtn = document.getElementById("doneBtn");
    const backToStartBtn = document.getElementById("backToStartBtn");

    let currentMedicineKey = null;

    // PAGE 1: Submit medicine name
    submitBtn.addEventListener("click", () => {
      const rawInput = medInput.value;
      const match = findClosestMedicine(rawInput);

      if (!match) {
        errorMsg.textContent = "âŒ Invalid medicine name. Please check the spelling.";
        return;
      }

      errorMsg.textContent = "";
      currentMedicineKey = match;
      confirmName.textContent = match.charAt(0).toUpperCase() + match.slice(1);
      showScreen(2);
    });

    medInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") submitBtn.click();
    });

    // PAGE 2: Medicine received -> go to counselling
    receivedBtn.addEventListener("click", () => {
      if (!currentMedicineKey) return;
      const med = currentMedicineKey;
      const niceName = med.charAt(0).toUpperCase() + med.slice(1);

      cMedName.textContent = niceName;

      const specific = counsellingData[med] || [];
      counselList.innerHTML = specific.map(p => `<li>${p}</li>`).join("");

      showScreen(3);
    });

    // PAGE 3: OK -> Page 4
    okBtn.addEventListener("click", () => {
      showScreen(4);
    });

    // PAGE 4: Another medicine or Done
    anotherBtn.addEventListener("click", () => {
      medInput.value = "";
      currentMedicineKey = null;
      errorMsg.textContent = "";
      showScreen(1);
      medInput.focus();
    });

    doneBtn.addEventListener("click", () => {
      showScreen(5);
    });

    // PAGE 5: Back to start
    backToStartBtn.addEventListener("click", () => {
      medInput.value = "";
      currentMedicineKey = null;
      errorMsg.textContent = "";
      showScreen(1);
      medInput.focus();
    });

    // Autofocus on load
    medInput.focus();
  </script>
</body>
</html>