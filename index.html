<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MediGuideAI</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --accent: #124a9e;
      --accent-soft: #2f6ddf;
      --muted: #6c7a90;
      --radius: 18px;
      --shadow: 0 10px 26px rgba(10, 40, 90, 0.12);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 12px;
    }
    .app {
      width: 100%;
      max-width: 420px;
      background: #fff;
      border-radius: 28px;
      padding: 22px 20px 26px;
      box-shadow: var(--shadow);
    }

    /* HEADER â€“ option B: logos left/right, text centered */
    header {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      margin-bottom: 20px;
      column-gap: 10px;
    }
    .head-left {
      display: flex;
      justify-content: flex-start;
      align-items: center;
    }
    .brand-icon {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
      font-size: 22px;
    }
    .head-center {
      text-align: center;
      line-height: 1.2;
    }
    .brand-text {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
      margin: 0;
    }
    .sub-brand-text {
      font-size: 13px;
      font-weight: 500;
      color: var(--muted);
      margin: 2px 0 0;
    }
    .head-right {
      display: flex;
      justify-content: flex-end;
    }
    .logo-ncp {
      height: 40px;
      width: auto;
      border-radius: 10px;
      object-fit: contain;
    }

    main { margin-top: 8px; }

    .screen { display: none; }
    .screen.active { display: block; }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 18px 16px 18px;
      border: 1px solid rgba(12, 36, 90, 0.04);
    }

    .title-main {
      font-size: 20px;
      font-weight: 600;
      margin: 0 0 10px;
      color: #1b2b40;
      text-align: center;
    }
    .text-center { text-align: center; }
    .text-muted {
      font-size: 13px;
      color: var(--muted);
      margin-top: 6px;
    }

    .input-wrapper {
      border-radius: 16px;
      border: 1px solid rgba(18, 74, 158, 0.18);
      padding: 10px 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      background: #f4f7ff;
    }
    .input-wrapper input {
      border: none;
      outline: none;
      background: transparent;
      width: 100%;
      font-size: 16px;
      color: #1d2b40;
    }
    .input-wrapper input::placeholder { color: #a0a9bd; }

    .btn {
      width: 100%;
      margin-top: 16px;
      border-radius: 16px;
      border: none;
      padding: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      color: #fff;
      box-shadow: 0 10px 22px rgba(18, 74, 158, 0.25);
    }
    .btn-secondary {
      background: #eef3ff;
      color: var(--accent);
      border: 1px solid rgba(18, 74, 158, 0.16);
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
    }

    .pill-card {
      margin-top: 4px;
      border-radius: 18px;
      padding: 18px 16px;
      background: #f6f8ff;
      border: 1px solid rgba(18, 74, 158, 0.06);
    }
    .pill-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .pill-name {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
    }
    .pill-icon {
      width: 52px;
      height: 52px;
      border-radius: 16px;
      background: #ffffff;
      border: 1px solid rgba(18, 74, 158, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .pill-section-title {
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 4px;
      color: #21324b;
    }
    ul.counsel-list {
      margin: 4px 0 0;
      padding-left: 18px;
      color: #3b4860;
      font-size: 14px;
    }
    ul.counsel-list li { margin-bottom: 4px; }

    .error-text {
      margin-top: 6px;
      font-size: 13px;
      color: #c62828;
      min-height: 16px;
      text-align: center;
    }

    @media (max-width: 480px) {
      body { padding: 8px; }
      .app {
        border-radius: 20px;
        padding: 18px 14px 22px;
      }
      .brand-text { font-size: 20px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- HEADER (shows on all pages) -->
    <header>
      <div class="head-left">
        <div class="brand-icon">+</div>
      </div>
      <div class="head-center">
        <p class="brand-text">MediGuideAI</p>
        <p class="sub-brand-text">Department of Pharmacy Practice</p>
      </div>
      <div class="head-right">
        <!-- Make sure ncp-logo.png is in the same folder -->
        <img src="ncp-logo.png" alt="NCP Logo" class="logo-ncp">
      </div>
    </header>

    <main>
      <!-- PAGE 1: Enter medicine name -->
      <section id="screen1" class="screen active">
        <div class="card">
          <h2 class="title-main">Enter medicine name</h2>

          <div class="input-wrapper">
            <input id="medInput" type="text" placeholder="Enter medicine name" autocomplete="off">
          </div>

          <button id="submitBtn" class="btn btn-primary">Submit</button>

          <div id="errorMsg" class="error-text"></div>
          <div class="text-muted text-center">
            Examples: Paracetamol, Ibuprofen, Cetirizine, Amoxicillin, ORS, Omeprazoleâ€¦
          </div>
        </div>
      </section>

      <!-- PAGE 2: Medicine received button only -->
      <section id="screen2" class="screen">
        <div class="card">
          <h2 class="title-main">Confirm medicine</h2>
          <p class="text-center text-muted">
            Medicine: <strong id="confirmName"></strong>
          </p>
          <button id="receivedBtn" class="btn btn-primary">Medicine received</button>
        </div>
      </section>

      <!-- PAGE 3: Counselling points -->
      <section id="screen3" class="screen">
        <div class="pill-card">
          <div class="pill-header">
            <div>
              <div class="pill-name" id="cMedName">Paracetamol</div>
              <div class="text-muted" id="cMedTagline">Counselling &amp; safety tips</div>
            </div>
            <div class="pill-icon">
              <!-- simple pill icon -->
              <svg width="34" height="34" viewBox="0 0 24 24" fill="none">
                <rect x="2" y="5" width="11" height="14" rx="3" fill="#2f6ddf" />
                <rect x="11" y="5" width="11" height="14" rx="3" fill="#ffffff" stroke="#2f6ddf" />
              </svg>
            </div>
          </div>

          <div class="pill-section-title">Counselling points</div>
          <ul id="counselList" class="counsel-list"></ul>
        </div>

        <button id="okBtn" class="btn btn-primary" style="margin-top: 16px;">OK</button>
      </section>

      <!-- PAGE 4: Need another medicine or done -->
      <section id="screen4" class="screen">
        <div class="card">
          <h2 class="title-main">Need another medicine?</h2>
          <p class="text-center text-muted">
            Do you want to check counselling for another medicine?
          </p>
          <button id="anotherBtn" class="btn btn-secondary">Yes, another medicine</button>
          <button id="doneBtn" class="btn btn-primary">Done</button>
        </div>
      </section>

      <!-- PAGE 5: Thank you page -->
      <section id="screen5" class="screen">
        <div class="card">
          <h2 class="title-main">Thank you for using MediGuideAI! ðŸ’Š</h2>
          <p class="text-center text-muted">
            Stay safe &amp; use medicines responsibly.<br>
            You can go back to the start if you want to check another medicine.
          </p>
          <button id="backToStartBtn" class="btn btn-primary">Back to start</button>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ---------- 1. MEDICINE DATA: 5 UNIQUE POINTS EACH (WITH EMOJIS) ----------

    const counsellingData = {
      "paracetamol": [
        "ðŸ’Š Take 1 tablet after food.",
        "ðŸŒ¡ï¸ Used for fever and mild to moderate pain.",
        "â±ï¸ Keep at least 4â€“6 hours between doses.",
        "ðŸš« Do not use more than 3 doses in 24 hours.",
        "ðŸº Avoid alcohol while taking paracetamol."
      ],
      "ibuprofen": [
        "ðŸ’Š Take after food to protect the stomach.",
        "ðŸ”¥ Helps reduce pain, swelling and inflammation.",
        "ðŸš« Avoid if you have stomach ulcers or severe kidney disease.",
        "â±ï¸ Use the lowest effective dose for the shortest time.",
        "ðŸ˜´ May cause dizziness in some people â€“ get up slowly."
      ],
      "diclofenac": [
        "ðŸ’Š Take after food to reduce stomach irritation.",
        "ðŸ”¥ Strong painkiller used for joint and muscle pain.",
        "ðŸš« Avoid if you have severe kidney, liver or stomach ulcer problems.",
        "â±ï¸ Do not use for long periods without medical supervision.",
        "ðŸº Avoid alcohol to protect the stomach and liver."
      ],
      "aceclofenac": [
        "ðŸ’Š Take after food with water.",
        "ðŸ”¥ Used for joint pain and inflammation.",
        "ðŸš« Avoid in severe kidney or liver disease.",
        "â±ï¸ Do not use for long time without doctor review.",
        "ðŸ¤¢ Inform doctor if you have severe stomach pain or black stool."
      ],
      "mefenamic acid": [
        "ðŸ’Š Often used for menstrual pain and cramps.",
        "ðŸ½ï¸ Take after food to reduce stomach upset.",
        "ðŸš« Avoid if you have history of ulcer or bleeding.",
        "â±ï¸ Use only for short-term pain relief.",
        "ðŸº Avoid alcohol while taking this medicine."
      ],
      "aspirin": [
        "ðŸ’Š Low dose is used for heart protection in some patients.",
        "ðŸ½ï¸ Take after food to reduce stomach irritation.",
        "ðŸš« Not recommended in children with fever (risk of Reyeâ€™s syndrome).",
        "ðŸ©¸ May increase bleeding risk â€“ inform doctor before surgery.",
        "ðŸº Avoid alcohol as it increases bleeding and stomach risk."
      ],
      "tramadol": [
        "ðŸ’Š Used for moderate to severe pain as prescribed.",
        "ðŸ˜´ Can cause sleepiness and dizziness.",
        "ðŸš— Avoid driving or operating machines after taking.",
        "ðŸš« Do not combine with alcohol or other sedatives.",
        "âš ï¸ Use only under strict medical supervision."
      ],
      "naproxen": [
        "ðŸ’Š Take after food to protect the stomach.",
        "ðŸ”¥ Used for joint pain, sprain and period pain.",
        "ðŸš« Avoid if you have ulcer or kidney problems.",
        "â±ï¸ Take only for the duration prescribed.",
        "ðŸº Avoid alcohol to reduce stomach side effects."
      ],
      "amoxicillin": [
        "ðŸ’Š Take after food to reduce stomach upset.",
        "â±ï¸ Complete the full course even if you feel better.",
        "ðŸš« Do not skip doses or stop without doctor advice.",
        "âš ï¸ Stop and seek help if rash, itching or swelling appears.",
        "ðŸ¦· May reduce effect of contraceptive pills â€“ use extra protection."
      ],
      "azithromycin": [
        "ðŸ’Š Take once daily at the same time.",
        "ðŸ½ï¸ Can be taken with or without food â€“ if upset, take after food.",
        "â±ï¸ Complete the full course even if symptoms improve.",
        "âš ï¸ Inform doctor if you have heart rhythm problems.",
        "ðŸš« Do not share antibiotics with others."
      ],
      "cefixime": [
        "ðŸ’Š Take with or without food as advised.",
        "ðŸ¦  Used for bacterial infections like urine and respiratory infections.",
        "â±ï¸ Complete entire course; donâ€™t stop early.",
        "ðŸ¤¢ May cause mild diarrhoea â€“ drink fluids.",
        "ðŸš« Inform doctor if severe allergy or watery diarrhoea occurs."
      ],
      "ciprofloxacin": [
        "ðŸ’Š Take 1â€“2 hours before or after dairy products (milk, curd).",
        "ðŸ¦  Used for certain bacterial infections like UTI.",
        "ðŸš« Avoid taking with iron or calcium supplements at the same time.",
        "âš ï¸ Inform doctor if you have tendon pain or swelling.",
        "â˜€ï¸ Avoid too much sun exposure; may increase sensitivity."
      ],
      "doxycycline": [
        "ðŸ’Š Take with a full glass of water while sitting or standing.",
        "ðŸ½ï¸ Best taken on empty stomach or after light meal.",
        "â˜€ï¸ Can cause sun sensitivity â€“ use sunscreen.",
        "ðŸš« Avoid taking with milk, antacids or iron at same time.",
        "â±ï¸ Complete the full prescribed course."
      ],
      "metronidazole": [
        "ðŸ’Š Used for certain infections of gut and vagina.",
        "ðŸ½ï¸ Take with food to reduce metallic taste and nausea.",
        "ðŸš« Strictly avoid alcohol during treatment and 48 hours after.",
        "ðŸ¤¢ May cause metallic taste or nausea in some people.",
        "ðŸ’§ Drink enough water unless restricted."
      ],
      "ofloxacin": [
        "ðŸ’Š Used for some urine and gut infections.",
        "ðŸš« Avoid taking with antacids, iron or zinc at same time.",
        "âš ï¸ Inform doctor if you have tendon pain or seizures.",
        "â˜€ï¸ Avoid direct strong sunlight if possible.",
        "â±ï¸ Complete the full course as prescribed."
      ],
      "erythromycin": [
        "ðŸ’Š Often taken before food for better absorption.",
        "ðŸ¦  Used in some respiratory and skin infections.",
        "ðŸ¤¢ Can cause stomach upset; take with little food if needed.",
        "âš ï¸ Inform doctor if you have heart rhythm problems.",
        "â±ï¸ Do not stop early without medical advice."
      ],
      "cetirizine": [
        "ðŸ¤§ Used for allergy, sneezing and runny nose.",
        "ðŸ˜´ Can cause sleepiness â€“ avoid driving if drowsy.",
        "ðŸŒ™ Better taken at night if it makes you sleepy.",
        "ðŸ’§ Drink water to avoid dry mouth.",
        "ðŸ½ï¸ Can be taken with or without food."
      ],
      "levocetirizine": [
        "ðŸ¤§ Used for allergy, itching and sneezing.",
        "ðŸ˜´ Can cause sleepiness in some people.",
        "ðŸŒ™ Prefer taking at night if drowsy.",
        "ðŸ’§ Drink water to reduce dry mouth.",
        "ðŸš— Avoid driving if you feel too sleepy."
      ],
      "loratadine": [
        "ðŸ¤§ Used for allergy with less chance of drowsiness.",
        "ðŸ½ï¸ Can be taken with or without food.",
        "â±ï¸ Usually taken once daily.",
        "ðŸ’§ Drink water to stay hydrated.",
        "âš ï¸ Inform doctor if severe rash or breathing trouble occurs."
      ],
      "fexofenadine": [
        "ðŸ¤§ Non-drowsy antihistamine for allergy.",
        "ðŸ½ï¸ Best taken with water, not fruit juice.",
        "â±ï¸ Follow the prescribed once or twice daily schedule.",
        "ðŸš« Avoid taking with antacids close to dose time.",
        "ðŸ’§ Maintain good fluid intake."
      ],
      "montelukast": [
        "ðŸ’Š Often taken in evening for asthma or allergy.",
        "ðŸ« Helps prevent wheezing and breathing difficulty.",
        "â±ï¸ Take daily as prescribed, not for sudden attacks.",
        "âš ï¸ Inform doctor if mood changes or sleep problems occur.",
        "ðŸš« Do not stop suddenly without doctor advice."
      ],
      "bromhexine": [
        "ðŸ¥„ Used as mucolytic to loosen thick mucus.",
        "ðŸ’§ Drink plenty of warm fluids for better effect.",
        "ðŸ½ï¸ Can be taken with or without food.",
        "ðŸ¤¢ May cause mild stomach discomfort.",
        "âš ï¸ Use carefully in patients with gastric ulcers."
      ],
      "dextromethorphan": [
        "ðŸ¥„ Cough suppressant, used for dry cough.",
        "ðŸ˜´ May cause mild drowsiness or dizziness.",
        "ðŸš« Avoid alcohol and other sedatives.",
        "ðŸš— Do not drive if you feel sleepy.",
        "ðŸ‘¶ Not suitable for very young children unless prescribed."
      ],
      "phenylephrine": [
        "ðŸ‘ƒ Used as decongestant for blocked nose.",
        "â±ï¸ Do not use for longer than recommended.",
        "â™¥ï¸ Use carefully in high blood pressure or heart disease.",
        "ðŸ˜´ May cause slight restlessness or trouble sleeping.",
        "ðŸš« Do not combine with other cold medicines without advice."
      ],
      "omeprazole": [
        "ðŸ½ï¸ Take 30 minutes before food, usually in the morning.",
        "ðŸ”¥ Reduces acidity, heartburn and reflux.",
        "ðŸš« Avoid very spicy, oily and heavy meals.",
        "â±ï¸ Take at the same time each day for best effect.",
        "ðŸ’Š Swallow the capsule whole â€“ do not crush or chew."
      ],
      "pantoprazole": [
        "ðŸ½ï¸ Take 30â€“60 minutes before breakfast.",
        "ðŸ”¥ Reduces acidity, heartburn and ulcer symptoms.",
        "ðŸš« Avoid smoking and alcohol as they worsen acidity.",
        "â±ï¸ Do not use longer than advised without review.",
        "ðŸµ Avoid very spicy, acidic drinks like strong tea/coffee."
      ],
      "ranitidine": [
        "ðŸ½ï¸ Can be taken before or after meals as directed.",
        "ðŸ”¥ Reduces acidity and helps in ulcer symptoms.",
        "â±ï¸ Take at the time prescribed by your doctor.",
        "ðŸ’§ Drink enough water during the day.",
        "âš ï¸ Inform doctor if you notice yellowing of eyes or skin."
      ],
      "esomeprazole": [
        "ðŸ½ï¸ Take at least 1 hour before a meal.",
        "ðŸ”¥ Used for acidity, reflux and ulcers.",
        "â±ï¸ Take regularly for the duration prescribed.",
        "ðŸš« Avoid heavy late-night meals.",
        "ðŸ’Š Swallow whole with water, do not crush."
      ],
      "domperidone": [
        "ðŸ’Š Take 15â€“30 minutes before food.",
        "ðŸ¤¢ Used for nausea, vomiting and bloating.",
        "â±ï¸ Use the shortest duration recommended.",
        "âš ï¸ Inform doctor if you have heart rhythm problems.",
        "ðŸš« Do not use with certain antifungal or antibiotic medicines without advice."
      ],
      "ondansetron": [
        "ðŸ’Š Used to prevent or treat nausea and vomiting.",
        "ðŸ½ï¸ Can be taken with or without food.",
        "â±ï¸ Take exactly as prescribed, usually before chemo or after surgery.",
        "âš ï¸ Inform doctor if you have heart rhythm problems.",
        "ðŸ¤¢ If severe constipation occurs, inform your doctor."
      ],
      "ors": [
        "ðŸ¥¤ Mix 1 full packet in 1 litre of clean water only.",
        "ðŸ’§ Sip slowly throughout the day, not all at once.",
        "ðŸš« Do not mix with milk, juice or soft drinks.",
        "ðŸŒ¡ï¸ Useful in diarrhoea, vomiting and dehydration.",
        "ðŸ§Š Discard unused ORS after 24 hours."
      ],
      "loperamide": [
        "ðŸ’Š Used to reduce frequency of loose motions.",
        "â±ï¸ Use only for short-term diarrhoea as advised.",
        "ðŸš« Do not use if there is blood in stool or high fever.",
        "ðŸ’§ Drink plenty of fluids to prevent dehydration.",
        "âš ï¸ Stop and consult doctor if symptoms persist or worsen."
      ],
      "metformin": [
        "ðŸ’Š Take with or just after a meal.",
        "ðŸ©¸ Used to control blood sugar in diabetes.",
        "â±ï¸ Take daily at the same time as prescribed.",
        "ðŸ¤¢ Mild stomach upset may occur initially and usually improves.",
        "ðŸš« Do not stop suddenly without consulting your doctor."
      ],
      "glimepiride": [
        "ðŸ’Š Take shortly before or with breakfast.",
        "ðŸ©¸ Used to control blood sugar in type 2 diabetes.",
        "â±ï¸ Take at the same time each day.",
        "âš ï¸ Watch for low sugar symptoms like sweating, hunger, shakiness.",
        "ðŸ½ï¸ Do not skip meals after taking this medicine."
      ],
      "insulin": [
        "ðŸ’‰ Use exactly as prescribed, at the correct time.",
        "ðŸ©¸ Rotate injection sites to avoid skin thickening.",
        "ðŸ½ï¸ Eat meals or snacks on time to avoid low sugar.",
        "âš ï¸ Watch for signs of low sugar: sweating, shaking, confusion.",
        "ðŸ§Š Store insulin in fridge, do not freeze."
      ],
      "amlodipine": [
        "ðŸ’Š Used to control high blood pressure and chest pain.",
        "â±ï¸ Take at the same time every day.",
        "ðŸ˜´ May cause dizziness or ankle swelling.",
        "ðŸš— Get up slowly from sitting or lying position.",
        "ðŸ§‚ Reduce salt intake for better BP control."
      ],
      "losartan": [
        "ðŸ’Š Used to control high blood pressure.",
        "ðŸ’§ Drink water but avoid excessive fluid if advised by doctor.",
        "â±ï¸ Take at the same time each day.",
        "ðŸ˜´ May cause dizziness â€“ rise slowly from sitting/lying.",
        "ðŸ§‚ Reduce salt intake for better blood pressure control."
      ],
      "telmisartan": [
        "ðŸ’Š Taken once daily for blood pressure control.",
        "â±ï¸ Take at the same time every day.",
        "ðŸ’§ Stay hydrated unless fluid restriction given.",
        "ðŸ˜´ May cause dizziness initially.",
        "ðŸ§‚ Low-salt diet improves effect of medicine."
      ],
      "metoprolol": [
        "ðŸ’Š Used for high blood pressure and some heart conditions.",
        "ðŸ½ï¸ Usually taken with or after food.",
        "ðŸ˜´ May cause tiredness, dizziness or slow heartbeat.",
        "ðŸš« Do not stop suddenly without doctor advice.",
        "ðŸƒ Avoid heavy exercise until you know how it affects you."
      ],
      "atenolol": [
        "ðŸ’Š Used for high blood pressure and some heart problems.",
        "â±ï¸ Take at the same time each day, with or without food.",
        "ðŸ˜´ May cause tiredness or dizziness initially.",
        "ðŸš« Do not stop suddenly; dose must be reduced gradually.",
        "ðŸƒ Avoid very heavy exercise without doctor advice."
      ],
      "domperidone": [
        "ðŸ’Š Take 15â€“30 minutes before food.",
        "ðŸ¤¢ Used for nausea, vomiting and bloating.",
        "â±ï¸ Use the shortest duration recommended.",
        "âš ï¸ Inform doctor if you have heart rhythm problems.",
        "ðŸš« Do not use with certain antifungal or antibiotic medicines without advice."
      ],
      "rabeprazole": [
        "ðŸ½ï¸ Take before meals, preferably in the morning.",
        "ðŸ”¥ Reduces acidity and helps in ulcers and reflux.",
        "â³ May take a few days for full effect.",
        "ðŸš« Avoid very spicy, citrus and fried foods.",
        "ðŸ’Š Swallow whole with water â€“ do not crush or chew."
      ]
      // You can still add more medicines following this pattern.
    };

    // ---------- 2. FUZZY MATCH: ONLY *ONE* LETTER MISTAKE ALLOWED ----------

    function levenshtein(a, b) {
      const dp = Array(a.length + 1).fill(null).map(() =>
        Array(b.length + 1).fill(0)
      );
      for (let i = 0; i <= a.length; i++) dp[i][0] = i;
      for (let j = 0; j <= b.length; j++) dp[0][j] = j;

      for (let i = 1; i <= a.length; i++) {
        for (let j = 1; j <= b.length; j++) {
          const cost = a[i - 1] === b[j - 1] ? 0 : 1;
          dp[i][j] = Math.min(
            dp[i - 1][j] + 1,
            dp[i][j - 1] + 1,
            dp[i - 1][j - 1] + cost
          );
        }
      }
      return dp[a.length][b.length];
    }

    function findClosestMedicine(input) {
      // use first word only, lowercase
      input = (input || "").trim().toLowerCase().split(/\s+/)[0];
      if (!input) return null;

      let bestMatch = null;
      let smallestDistance = Infinity;

      for (const med in counsellingData) {
        const dist = levenshtein(input, med);
        if (dist < smallestDistance) {
          smallestDistance = dist;
          bestMatch = med;
        }
      }

      // âœ… Only exact match (0) or ONE-letter mistake (1) allowed
      return smallestDistance <= 1 ? bestMatch : null;
    }

    // ---------- 3. PAGE / SCREEN HANDLING ----------

    const screens = {
      1: document.getElementById("screen1"),
      2: document.getElementById("screen2"),
      3: document.getElementById("screen3"),
      4: document.getElementById("screen4"),
      5: document.getElementById("screen5")
    };

    function showScreen(n) {
      Object.values(screens).forEach(s => s.classList.remove("active"));
      screens[n].classList.add("active");
    }

    // ---------- 4. ELEMENTS & FLOW LOGIC ----------

    const medInput = document.getElementById("medInput");
    const submitBtn = document.getElementById("submitBtn");
    const errorMsg = document.getElementById("errorMsg");

    const confirmName = document.getElementById("confirmName");
    const receivedBtn = document.getElementById("receivedBtn");

    const cMedName = document.getElementById("cMedName");
    const counselList = document.getElementById("counselList");
    const okBtn = document.getElementById("okBtn");

    const anotherBtn = document.getElementById("anotherBtn");
    const doneBtn = document.getElementById("doneBtn");
    const backToStartBtn = document.getElementById("backToStartBtn");

    let currentMedicineKey = null;

    // PAGE 1: Submit medicine name
    submitBtn.addEventListener("click", () => {
      const rawInput = medInput.value;
      const match = findClosestMedicine(rawInput);

      if (!match) {
        errorMsg.textContent = "âŒ Invalid medicine name. Please check the spelling.";
        return;
      }

      errorMsg.textContent = "";
      currentMedicineKey = match;
      confirmName.textContent = match.charAt(0).toUpperCase() + match.slice(1);
      showScreen(2);
    });

    medInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") submitBtn.click();
    });

    // PAGE 2: Medicine received -> go to counselling
    receivedBtn.addEventListener("click", () => {
      if (!currentMedicineKey) return;
      const med = currentMedicineKey;
      const niceName = med.charAt(0).toUpperCase() + med.slice(1);

      cMedName.textContent = niceName;

      const specific = counsellingData[med] || [];
      counselList.innerHTML = specific.map(p => `<li>${p}</li>`).join("");

      showScreen(3);
    });

    // PAGE 3: OK -> Page 4
    okBtn.addEventListener("click", () => {
      showScreen(4);
    });

    // PAGE 4: Another medicine or Done
    anotherBtn.addEventListener("click", () => {
      medInput.value = "";
      currentMedicineKey = null;
      errorMsg.textContent = "";
      showScreen(1);
      medInput.focus();
    });

    doneBtn.addEventListener("click", () => {
      showScreen(5);
    });

    // PAGE 5: Back to start
    backToStartBtn.addEventListener("click", () => {
      medInput.value = "";
      currentMedicineKey = null;
      errorMsg.textContent = "";
      showScreen(1);
      medInput.focus();
    });

    // Autofocus on load
    medInput.focus();
  </script>
</body>
</html>
