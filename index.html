<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Medicine Counselling</title>
  <style>
    body { font-family: Arial, sans-serif; padding:18px; background:#fff; color:#111; }
    h1 { font-size:22px; margin-bottom:12px; text-align:center; }
    .card { border:1px solid #e6e6e6; padding:14px; border-radius:10px; background:#fbfbfb; max-width:540px; margin:0 auto; }
    label { display:block; margin-bottom:6px; font-weight:600; }
    input[type="text"] { width:100%; padding:12px; font-size:16px; border:1px solid #ccc; border-radius:8px; box-sizing:border-box; }
    button { width:100%; padding:12px; margin-top:12px; font-size:16px; border-radius:8px; border:0; background:#1976d2; color:white; }
    .secondary { background:#f1f1f1; color:#222; border:1px solid #ddd; }
    .status { margin-top:12px; font-weight:700; }
    .counsel { margin-top:14px; padding:12px; border-radius:8px; background:#fff; border:1px solid #e0e0e0; }
    ul { margin:6px 0 0 18px; }
    .actions { display:flex; gap:10px; margin-top:12px; }
    .actions button { flex:1; }
    .small { font-size:13px; color:#666; margin-top:10px; text-align:center; }
  </style>
</head>
<body>
  <h1>Medicine Counselling</h1>

  <div class="card">
    <label for="medName">Enter medicine name</label>
    <input id="medName" type="text" placeholder="Type e.g. Paracetamol" autocomplete="off" />

    <button id="submitBtn">Submit / Medicine received</button>

    <div id="status" class="status" style="display:none;"></div>

    <div id="counsel" class="counsel" style="display:none;">
      <div id="counselTitle" style="font-weight:700; margin-bottom:8px;"></div>
      <div id="counselBody"></div>

      <div class="actions">
        <button id="moreBtn" class="secondary">Need another medicine</button>
        <button id="closeBtn">Done / Close</button>
      </div>
      <div class="small">If unsure, contact a doctor or pharmacist.</div>
    </div>
  </div>

  <script>
    // Medicine list - add or edit names in lowercase keys
    const counsellingData = {
      "paracetamol": [
        "Take after food.",
        "Use for fever or mild pain.",
        "Do not exceed recommended dose."
      ],
      "cough syrup": [
        "Shake well before use.",
        "Take at night if possible.",
        "Avoid driving if sleepy."
      ],
      "antacid": [
        "Take 30 minutes after meals.",
        "Helps reduce acidity.",
        "Avoid spicy foods."
      ],
      "amoxicillin": [
        "Take after food.",
        "Complete the full course.",
        "Do not skip doses.",
        "If allergic symptoms appear, visit doctor."
      ],
      "ibuprofen": [
        "Take after food.",
        "Use for pain or swelling.",
        "Avoid if you have stomach ulcer."
      ],
      "cetirizine": [
        "Use for allergy or cold.",
        "May cause sleepiness.",
        "Avoid driving after taking it."
      ],
      "dolo 650": [
        "Take after food.",
        "Use for fever or pain.",
        "Do not take more than 3 times a day."
      ],
      "metformin": [
        "Take with meals.",
        "Used for diabetes control.",
        "Continue daily unless doctor says otherwise."
      ],
      "omeprazole": [
        "Take before food.",
        "Helps with acidity and reflux.",
        "Avoid fatty and spicy foods."
      ],
      "azithromycin": [
        "Take once daily.",
        "Complete the whole course.",
        "Do not skip doses."
      ],
      "iron tablet": [
        "Take after food.",
        "May cause dark stool (normal).",
        "Avoid tea/coffee with the tablet."
      ],
      "vitamin c": [
        "Take after food.",
        "Helps immunity.",
        "Drink enough water."
      ],
      "pain balm": [
        "Apply a small amount on painful area.",
        "Avoid contact with eyes.",
        "Wash hands after use."
      ],
      "ors": [
        "Mix full packet in 1 litre water.",
        "Sip slowly throughout the day.",
        "Do not mix with milk or juice."
      ]
    };

    const medInput = document.getElementById('medName');
    const submitBtn = document.getElementById('submitBtn');
    const statusDiv = document.getElementById('status');
    const counselDiv = document.getElementById('counsel');
    const counselTitle = document.getElementById('counselTitle');
    const counselBody = document.getElementById('counselBody');
    const moreBtn = document.getElementById('moreBtn');
    const closeBtn = document.getElementById('closeBtn');

    function showCounsellingFor(nameRaw) {
      const name = nameRaw.trim();
      if (!name) return;
      const key = name.toLowerCase();

      statusDiv.style.display = 'block';
      statusDiv.textContent = 'Medicine received: ' + name;

      counselDiv.style.display = 'block';
      counselTitle.textContent = name;

      if (counsellingData[key]) {
        const items = counsellingData[key];
        counselBody.innerHTML = '<ul>' + items.map(i => '<li>' + i + '</li>').join('') + '</ul>';
      } else {
        counselBody.innerHTML = '<ul>'
          + '<li>Take the medicine as directed on label.</li>'
          + '<li>Do not take extra doses.</li>'
          + '<li>If symptoms continue, consult a doctor.</li>'
          + '</ul>';
      }
      closeBtn.focus();
    }

    submitBtn.addEventListener('click', function() {
      const val = medInput.value;
      if (!val.trim()) {
        alert('Please type medicine name.');
        medInput.focus();
        return;
      }
      showCounsellingFor(val);
    });

    medInput.addEventListener('keyup', function(e) {
      if (e.key === 'Enter') submitBtn.click();
    });

    moreBtn.addEventListener('click', function() {
      medInput.value = '';
      medInput.focus();
      statusDiv.style.display = 'none';
      counselDiv.style.display = 'none';
    });

    closeBtn.addEventListener('click', function() {
      counselBody.innerHTML = '<div style="font-weight:700; padding:10px 0;">Thank you â€” stay well!</div>';
      try { window.close(); } catch(e) { /* ignore */ }
    });
  </script>
</body>
</html>
